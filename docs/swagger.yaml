basePath: /
definitions:
  analytics.DashboardSummary:
    properties:
      cancellation_rate:
        description: Percentage
        type: number
      cancelled_appointments:
        type: integer
      completed_appointments:
        type: integer
      confirmed_appointments:
        type: integer
      pending_appointments:
        type: integer
      total_appointments:
        type: integer
      total_doctors:
        type: integer
      total_patients:
        type: integer
      total_revenue:
        type: number
    type: object
  analytics.RevenueByService:
    properties:
      revenue:
        type: number
      service_id:
        type: string
      service_name:
        type: string
      total_citas:
        type: integer
    type: object
  appointment.CreateAppointmentRequest:
    properties:
      appointment_date:
        description: 'Format: "2006-01-02" (YYYY-MM-DD)'
        type: string
      appointment_time:
        description: 'Format: "15:04" (HH:MM 24-hour)'
        type: string
      doctor_id:
        type: string
      reason:
        type: string
      service_id:
        type: string
    type: object
  auth.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  auth.LoginResponse:
    properties:
      expires_at:
        type: string
      token:
        type: string
      user:
        properties:
          email:
            type: string
          first_name:
            type: string
          id:
            type: string
          last_name:
            type: string
          role:
            type: string
        type: object
    type: object
  domain.Appointment:
    properties:
      cancellation_reason:
        type: string
      cancelled_at:
        type: string
      created_at:
        type: string
      doctor_id:
        type: string
      doctor_name:
        description: Full name of doctor with "Dr." prefix
        type: string
      duration:
        description: in minutes
        type: integer
      id:
        type: string
      notes:
        type: string
      patient_id:
        type: string
      patient_name:
        description: Full name of patient
        type: string
      reason:
        type: string
      reminder_1h_sent:
        type: boolean
      reminder_24h_sent:
        type: boolean
      scheduled_at:
        type: string
      service_id:
        description: 'Optional: Service associated with this appointment'
        type: string
      service_name:
        description: Name of the service
        type: string
      status:
        $ref: '#/definitions/domain.AppointmentStatus'
      updated_at:
        type: string
    type: object
  domain.AppointmentStatus:
    enum:
    - pending
    - confirmed
    - cancelled
    - completed
    type: string
    x-enum-varnames:
    - StatusPending
    - StatusConfirmed
    - StatusCancelled
    - StatusCompleted
  domain.Service:
    properties:
      created_at:
        type: string
      description:
        description: Detailed description of the service
        type: string
      duration_minutes:
        description: Duration of each appointment slot (e.g., 30, 45, 60 minutes)
        type: integer
      id:
        type: string
      is_active:
        description: Whether the service is currently offered
        type: boolean
      name:
        description: e.g., "Consulta Cardiológica", "Electrocardiograma"
        type: string
      price:
        description: Price of the service
        type: number
      updated_at:
        type: string
    type: object
  domain.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      first_name:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_name:
        type: string
      phone:
        type: string
      role:
        $ref: '#/definitions/domain.UserRole'
      updated_at:
        type: string
    type: object
  domain.UserRole:
    enum:
    - admin
    - doctor
    - patient
    type: string
    x-enum-varnames:
    - RoleAdmin
    - RoleDoctor
    - RolePatient
  service.TimeSlot:
    properties:
      available:
        type: boolean
      time:
        description: HH:MM format
        type: string
    type: object
  user.CreateUserRequest:
    properties:
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      password:
        minLength: 8
        type: string
      phone:
        type: string
      role:
        type: string
    required:
    - email
    - first_name
    - last_name
    - password
    - phone
    - role
    type: object
host: localhost:8080
info:
  contact:
    email: zensoftsas@gmail.com
    name: Zensoft Team
    url: https://github.com/zensoftsas/sistema-reservas
  description: |
    API completa para gestión de clínica médica con sistema de citas, servicios, horarios personalizados y analytics.

    Características principales:
    - Autenticación JWT con roles (admin, doctor, patient)
    - Sistema de citas médicas con validaciones
    - Servicios médicos con precios y duraciones
    - Horarios personalizados por doctor
    - Cálculo dinámico de slots disponibles
    - Analytics y reportes para administradores
    - Notificaciones por email (SendGrid)
    - Recordatorios automáticos
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Sistema de Reservas - Clínica Internacional API
  version: "1.0"
paths:
  /api/analytics/dashboard:
    get:
      consumes:
      - application/json
      description: Retorna resumen con KPIs principales del sistema (solo admin)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/analytics.DashboardSummary'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Dashboard summary
      tags:
      - Analytics
  /api/analytics/revenue:
    get:
      consumes:
      - application/json
      description: Retorna ingresos agrupados por servicio (solo admin)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/analytics.RevenueByService'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Estadísticas de ingresos
      tags:
      - Analytics
  /api/appointments:
    post:
      consumes:
      - application/json
      description: Crear una nueva cita médica con validaciones de disponibilidad
      parameters:
      - description: Datos de la cita
        in: body
        name: appointment
        required: true
        schema:
          $ref: '#/definitions/appointment.CreateAppointmentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.Appointment'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Crear cita médica
      tags:
      - Appointments
  /api/appointments/my:
    get:
      consumes:
      - application/json
      description: Retorna todas las citas del usuario autenticado
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Appointment'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Obtener mis citas
      tags:
      - Appointments
  /api/auth/login:
    post:
      consumes:
      - application/json
      description: Autenticar usuario y obtener token JWT
      parameters:
      - description: Email y password
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.LoginResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Login de usuario
      tags:
      - Authentication
  /api/services:
    get:
      consumes:
      - application/json
      description: Retorna todos los servicios médicos disponibles
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/domain.Service'
            type: array
      summary: Listar servicios activos
      tags:
      - Services
  /api/services/available-slots:
    get:
      consumes:
      - application/json
      description: Calcula y retorna los slots de tiempo disponibles para un doctor,
        servicio y fecha específicos
      parameters:
      - description: ID del usuario doctor
        in: query
        name: doctor_id
        required: true
        type: string
      - description: ID del servicio
        in: query
        name: service_id
        required: true
        type: string
      - description: Fecha en formato YYYY-MM-DD
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/service.TimeSlot'
            type: array
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Obtener horarios disponibles
      tags:
      - Services
  /api/users:
    post:
      consumes:
      - application/json
      description: Crear un nuevo usuario (admin, doctor o patient)
      parameters:
      - description: Datos del usuario
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/domain.User'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Crear usuario
      tags:
      - Users
  /api/users/me:
    get:
      consumes:
      - application/json
      description: Retorna información del usuario actual basado en el token JWT
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/domain.User'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Obtener perfil del usuario autenticado
      tags:
      - Users
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
tags:
- description: Endpoints de autenticación y login
  name: Authentication
- description: Gestión de usuarios (admin, doctor, patient)
  name: Users
- description: Sistema de citas médicas
  name: Appointments
- description: Gestión de servicios/consultas médicas
  name: Services
- description: Horarios personalizados de doctores
  name: Schedules
- description: Reportes y estadísticas (solo admin)
  name: Analytics
- description: Búsqueda de doctores por especialidad
  name: Doctors
